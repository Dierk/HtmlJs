<!DOCTYPE html>
<html>
<head>
    <title>View</title>

    <style>
        body {
            margin: 2em;
        }
        .ball {
            width: 40px;
            height: 40px;
            background-color: black;
            border-radius: 50%;
        }
    </style>
</head>
<body>

<h1>Animate</h1>

Linear
<div id="toMove1" class="ball"></div>
Ease in
<div id="toMove2" class="ball"></div>
Ease both
<div id="toMove3" class="ball"></div>
Ease out
<div id="toMove4" class="ball"></div>
Offset
<div id="toMove5" class="ball"></div>
Wiggle
<div id="toMove6" class="ball"></div>

<script>

    // cmp alternative: https://css-tricks.com/emulating-css-timing-functions-javascript/

    const linear = x => x;

    const undertow = span => fn => x =>
        x < span
        ? -fn(x)
        : scale(fn(-span), 1, (x - span) / (1-span), fn );

    const overtow = span => fn => x =>
        x > span
        ? 2 - fn(x)
        : scale(0, fn(2 - span), x * (2-span), fn);

    // https://math.stackexchange.com/questions/121720/ease-in-out-function
    const slope = alpha => x => {
        const nom = Math.pow(x,alpha);
        return nom / (nom + Math.pow(1-x, alpha));
    };

    const easeBoth = slope(1.3);

    const easeIn = fraction =>
        fraction < 0.5
        ? easeBoth(fraction)
        : linear  (fraction);

    const easeOut = fraction =>
        fraction > 0.5
        ? easeBoth(fraction)
        : linear  (fraction);


    // scale results of a function 0..1 to values between begin and end
    const scale = (beginValue, endValue, fraction, fn) =>
        beginValue + (endValue - beginValue) * fn(fraction);

    const animate = (beginValue, endValue, tweening, millisecs, callback) => {
        let start = null;
        function paint(timestamp) {
          if (!start) start = timestamp;
          const progress = timestamp - start;
          const fraction = progress / millisecs;
          const value = scale(beginValue, endValue, fraction, tweening);
          callback(value);
          if (progress < millisecs) {
            window.requestAnimationFrame(paint);
          } else {
            callback(endValue);
          }
        }
        callback(beginValue);
        window.requestAnimationFrame(paint);
    };

    const bounceLeft  = undertow(0.3)(linear);
    const bounceRight = overtow(0.7)(linear);
    const wiggle = overtow(0.9)( undertow(0.1)(linear) );

    animate(0,   1000, linear,   2000, value => toMove1.style.transform = 'translateX(' + value + 'px)');
    animate(0,   1000, easeIn,   2000, value => toMove2.style.transform = 'translateX(' + value + 'px)');
    animate(0,   1000, easeBoth, 2000, value => toMove3.style.transform = 'translateX(' + value + 'px)');
    animate(0,   1000, easeOut,  2000, value => toMove4.style.transform = 'translateX(' + value + 'px)');
    animate(500, 1000, linear,   2000, value => toMove5.style.transform = 'translateX(' + value + 'px)');
    animate(0  , 1000, wiggle,   2000, value => toMove6.style.transform = 'translateX(' + value + 'px)');

</script>

</body>
</html>
