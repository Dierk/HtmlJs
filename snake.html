<html><head></head><body onload="start()">

<canvas id="canvas" width="400" height="400" > 	
</canvas>

<script language="javascript">

    const north = {dx:  0, dy: -1}
    const east  = {dx:  1, dy:  0}
    const south = {dx:  0, dy:  1}
    const west  = {dx: -1, dy:  0}

    let direction = north;

	const clockwise = [north, east, south, west, north]
	const countercw = [north, west, south, east, north]

    let snake = [
        {x: 10, y:5},
	    {x: 10, y:6},
	    {x: 10, y:7},
	    {x: 10, y:8},
    ]
    let food = {x: 15, y:15}

	function start() {		
	   const canvas  = document.getElementById("canvas");		
	   const context = canvas.getContext("2d");
	
	   const rightArrow = 39
	   const leftArrow  = 37
	   window.onkeydown = (evt) => {
		  const orientation = (evt.keyCode == rightArrow) ? clockwise : countercw
		  const idx = orientation.indexOf(direction);
		  direction = orientation[idx + 1]
	   }
			
       setInterval( () => {	
	       nextBoard();
	       display(context);
       }, 1000/5);			
	   
	}
	
	function nextBoard() {				
		const maxX = 20; // place new head position
		const maxY = 20;
		const head = snake[0];
			
		if (food.x == head.x && food.y == head.y) {  // have we found the food?
			food.x = Math.floor(Math.random() * 20); // place new food at random location
			food.y = Math.floor(Math.random() * 20);
			const copyLast = Object.assign({}, snake[snake.length - 1] ) // store in case we need to grow
			snake.push(copyLast);                    // make snake one element longer
		}
		
		for(let i=snake.length - 1; i > 0; i--) { // draw tail behind predecessor
			const element = snake[i];
			const pred    = snake[i-1];
			element.x = pred.x;
			element.y = pred.y;
		}				
		head.x += direction.dx; if (head.x < 0) { head.x = maxX - 1 }; if (head.x > maxX) { head.x = 0 }
		head.y += direction.dy; if (head.y < 0) { head.y = maxY - 1 }; if (head.y > maxY) { head.y = 0 }		
			
	}
	
	function display(context) {		
		// clear 
	    context.fillStyle = "black";
	    context.fillRect(0, 0, canvas.width, canvas.height);
	    // draw all elements
		context.fillStyle = "cyan"		
		snake.forEach ( element =>
			fillBox(context, element)
		)
		context.fillStyle = "green"
		fillBox(context, snake[0])
		// draw food
		context.fillStyle = "red";
		fillBox(context, food);		
	}
	
	function fillBox(context, element) {
		context.fillRect(element.x * 20 + 1, element.y * 20 + 1, 18, 18);		
	}


</script>

</body>
<html>