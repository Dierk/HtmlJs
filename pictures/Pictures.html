<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Paitings</title>
    <style>
        :root {
            color-scheme:   dark;
        }
        body {
            display:        flex;
            flex-direction: column;
            max-height:     100vh;
            background-image: linear-gradient(-20deg, #333, #888 66%, #333);
            margin:         2rem;
        }
        h1 {
            margin:         0 2rem 2rem 2rem;
        }
        main {
            container-name: main_container;
            container-type: inline-size;
            flex-grow:      1;
            overflow-y:     scroll;
            scroll-snap-type: y mandatory;
        }
        .gallery {
            display: grid;
            grid-template-columns: auto;
            @media (orientation: landscape) and (width > 1430px) {
                & {
                    grid-template-columns: auto auto;
                }
            }
        }
        article {
            scroll-snap-align:  start;
            margin-bottom:      3rem;
            display:            grid;
            grid-template-columns: auto;
            align-content:      start;
        }
        article > img {
            box-sizing:         border-box;
            object-fit:         contain;
            max-width:          calc(100% - 2em);
            max-height:         calc(100vh - 6.5rem);
            padding:            2rem;
            background:         #999;
            box-shadow:         .5em 1em 1em 0 black;
            border:             1px solid white;
        }
        article > * {
            padding-inline:     2rem;
        }
        article > p {
            max-width:          42ch;
            margin-top:         0;
            margin-bottom:      .5em;
        }
    </style>
</head>
<body>
<header>
    <h1>Bildergalerie Dierk König 4</h1>
</header>

<main>
    <div class="gallery"></div>
</main>

<script>
    const [gallery] = document.getElementsByClassName("gallery");

    const paintings = [
        {
            title:       "Herbstwald",
            orientation: "landscape",
            medium:      "painting/forest_med_640x450.jpeg",
            big:         "painting/forest_big_1280x899.jpeg",
            lines:       [
                "Wanderweg zwischen Wasserfluh und Saalhöhe",
                "Aquarell, Oktober 2022, 40cm x 30cm, Schmincke Horadam auf Hahnemühle Leonardo Papier"
            ],
        },
        {
            title:       "William Dafoe",
            orientation: "portrait",
            medium:      "painting/dafoe_med_475x640.jpeg",
            big:         "painting/dafoe_big_949x1280.jpeg",
            lines:       [
                "Schauspieler, van Gogh Darsteller in \"At Eternity's Gate\" (2018)",
                "Öl auf Malplatte, September 2024, 24cm x 36cm, Schmincke Norma Blue",
                "Ausgestellt in der Gruppenausstellung Atelier Nützel 2024, Wien."
            ],
        },
        {
            title:       "title1",
            orientation: "portrait",
            medium:      "https://unsplash.it/600/800",
            big:         "https://unsplash.it/1200/1600",
            lines:       [
                "bla bla bla bla bla bla ",
            ],
        },
        {
            title:       "title2",
            orientation: "landscape",
            medium:      "https://unsplash.it/600/800",
            big:         "https://unsplash.it/1200/1600",
            lines:       [
                "bla bla bla bla bla bla ",
            ],
        },
    ];

    const paintingsHtml = paintings.reduce( (acc, painting) => acc + `
            <article class="art ${painting.orientation}">
                <img
                     src="${painting.medium}"
                     data-big="${painting.big}"
                     alt="${painting.title}">
                <h2>${painting.title}</h2>
                ${painting.lines.reduce( (acc, cur) => acc + '<p>' + cur + '</p>', '')}
            </article>
        `, "");


    gallery.innerHTML = paintingsHtml;

    // setting up the intersection observer to lazily increase resolution for pictures when they come in view

    const options = {
      root: document.querySelector("main"),
      rootMargin: "0px",
      scrollMargin: "0px",
      threshold: 1.0,
    };
    const callback = (entries, observer) => {
      entries.forEach((entry) => {
          if (entry.isIntersecting) {
              entry.target.setAttribute("src", entry.target.getAttribute("data-big"));
              observer.unobserve(entry.target);
          }
      });
    };
    const observer = new IntersectionObserver(callback, options);

    paintings.forEach( painting => {
        const target = document.querySelector(`[alt="${painting.title}"]`);
        observer.observe(target);
    });






</script>

</body>
</html>
