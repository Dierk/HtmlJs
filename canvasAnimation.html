<html><head></head><body onload="start()">

<canvas id="canvas1" width="400" height="400" > 	
</canvas>
<canvas id="canvas2" width="400" height="300" > 	
</canvas>

<script language="javascript">

	function start() {
		makePainter("canvas1").paint();
	    makePainter("canvas2").paint();
	}

	function makePainter(id) {
		const canvas  = document.getElementById(id);		
		const context = canvas.getContext("2d");
		const increment = 3
		const animationMs = 1000 / (canvas.height / increment)
		
		function paintLine(y) {
			
			context.fillStyle = "red";
			context.fillRect(0,0,canvas.width,canvas.height);
			
			context.fillStyle = "black";
			context.fillRect(0,y,canvas.width,2);			
			
			if (y < canvas.height) {			
				setTimeout(paintLine, animationMs, y + increment);
			}			
		}
		return { 'paint': () => paintLine(0) }		
	}
	

</script>

</body>
<html>